[[extend 'layout.html']]

<style>
[v-cloak] {
     display: none;
}
div.a {
  font-size: 15px;
  color: gray;
}

div.b {
  font-size: large;
}

div.c {
  font-size: 150%;
}
</style>
<div class="title" style = "width:1350px; margin:20px auto; text-align: center;">Resources for [[=course.upper()]]</div>
<div class="section" id="vue-target" v-cloak>
  

  <div v-if="add_mode" class="container block">
    <div class="form">
      <!-- This looks like a form, but is not.  We just need the inputs. -->
      <div class="field">
        <div class="control">
          <textarea type="text" v-model="add_title" class="textarea" placeholder = "Title of Resource" rows = "1" ></textarea>
          <textarea type="text" v-model="add_comment" class="textarea" placeholder = "Description of Resource"></textarea>
          
          
        </div>
      </div>
      <div class="field">
        <div class="control">
            <input name="d_elem" type="hidden" value= "[[=course]]" id="d_elem">
        </div>
      </div>
      <div class="field">
        <div class="control">
          <input type="submit" @click="add_contact" value="Add" class="button is-primary">
          <input type="submit" @click="set_add_status(false)" value="Cancel" class="button is-warning">
        </div>
      </div>
    </div>
  </div>
    

  <div class="container block">
    
      <div v-if="add_mode == false" class="container block">
    <button @click="set_add_status(true)" class="button is-primary">
      <i class="fa fa-plus fa-fw"></i>
    </button>
    <a class="button is-warning" href="[[=URL('index')]]">
      <span>Return To Main Page</span></a>
    
  </div>
    <div v-for="r in rows.slice().reverse()" class="block">
      
      

    <div v-if="r.sym == '[[=course]]'">
        <div v-if="r.created_by != '[[=user['email'] ]]'" class="container block"></div>
    
    <div v-else class="container block">
        <button @click="delete_contact(r._idx)" class="button is-danger" style = "margin-top: 20px; float:right;">
        <i class="fa fa-trash"></i></button></td>
        
    </div>
        <div class = "c">{{r.title}}</div>
      
      <div class = "a">{{r.description}}</div>
       
      
      <div v-for = "u in users" class = "block">
       
        
      <div v-if = "r.id == u.item_id" class = "container block">

        <div v-if="u.status == 1" >
          <i class="fa fa-thumbs-up fa-lg" v-on:click="set_like_status(r._idx, 0, 1)"></i>
           {{r.likes}}
          <i class="fa fa-thumbs-o-down fa-lg" v-on:click="set_like_status(r._idx, 2, 1)"></i>
          {{r.dislikes}}
          </div>
          
        <div v-if="u.status == 2" >
          <i class="fa fa-thumbs-o-up fa-lg" v-on:click="set_like_status(r._idx, 1, 2)"></i>
          {{r.likes}}
          <i class="fa fa-thumbs-down fa-lg" v-on:click="set_like_status(r._idx, 0, 2)"></i>
          {{r.dislikes}}
          </div>
        <div v-if="u.status == 0" >
          <i class="fa fa-thumbs-o-up fa-lg" v-on:click="set_like_status(r._idx, 1, 0)" ></i>
          {{r.likes}}
          <i class="fa fa-thumbs-o-down fa-lg" v-on:click="set_like_status(r._idx, 2, 0)"></i>
          {{r.dislikes}}
          </div>
      </div>
      </div>
    
    </div>
      
    </div>
    
  </div>

</div>


[[block page_scripts]]
<!-- Loads the index-specific js for Vue -->
<script>
  let load_contacts_url = "[[=XML(load_contacts_url)]]";
  let add_contact_url = "[[=XML(add_contact_url)]]";
  let delete_contact_url = "[[=XML(delete_contact_url)]]";
  let like_url = "[[=XML(like_url)]]";
</script>
<script src="js/index.js"></script>
[[end]]